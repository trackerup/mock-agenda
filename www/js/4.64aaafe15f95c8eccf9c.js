webpackJsonp([4],{M6Fp:function(t,e,s){"use strict";var a={name:"CardExpand",data:function(){return{expand:!1}},props:{title:{type:String,required:!0,default:""}},methods:{triggerExpand:function(){this.expand=!this.expand}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdl-card expand"},[s("h6",{class:{active:t.expand},on:{click:t.triggerExpand}},[t._v(t._s(t.$t(t.title))+"\n    "),t._m(0)]),t._v(" "),s("div",{staticClass:"mdl-grid mdl-grid--no-spacing dados",class:{active:t.expand}},[s("div",{staticClass:"col"},[t._t("default")],2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"arrow-button"},[e("i",{staticClass:"material-icons"},[this._v("arrow_drop_down")])])}]},r=s("VU/8")(a,n,!1,null,null,null);e.a=r.exports},MF2h:function(t,e,s){"use strict";var a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"mdl-button mdl-button--fab orange",on:{click:function(e){return t.$router.push("/messages")}}},[s("i",{staticClass:"material-icons message"},[t._v("message")])])},staticRenderFns:[]},n=s("VU/8")({name:"MessageButton"},a,!1,null,null,null);e.a=n.exports},sAYs:function(t,e){},tJgT:function(t,e,s){"use strict";var a=s("fZjL"),n=s.n(a),r=s("pFYg"),i=s.n(r),o=s("Dd8w"),u=s.n(o),c=s("NYxO"),l=s("M6Fp"),d=s("PJh5"),m=s.n(d),f={name:"TaskTitle",components:{CardExpand:l.a},props:{task:{type:Object,required:!0,default:function(){return{id:0,title:"",status:"",address:""}}}},mounted:function(){for(var t=document.getElementsByClassName("expandNow"),e=0;e<t.length;e++){t[e].childNodes[0].childNodes[0].childNodes[2].click()}},computed:u()({},Object(c.b)({currentTask:"task/currentTask"}),{numOS:function(){var t=this.task.id;if(this.task.metaDados)for(var e in this.task.metaDados)if("__OS"==this.task.metaDados[e].meta_key)return this.task.metaDados[e].meta_value;return t}}),methods:{isDetalheMeta:function(t){if(0!=t.meta_key.indexOf("__")){if("string"!=typeof t.meta_value)return"object"!=i()(t.meta_value)||n()(t.meta_value).length>0;if(""!=t.meta_value&&"[]"!=t.meta_value)return!0}return!1}},filters:{formatDataMeta:function(t){return t?t.slice(6,8)+"/"+t.slice(4,6)+"/"+t.slice(0,4):t},formatDataComment:function(t){if(!t)return t;try{return m()(t).format("DD/MM/YYYY HH:mm:ss")}catch(e){return t}}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdl-card taskitem"},[s("div",{staticClass:"row row-titulo"},[s("div",{staticClass:"status-title"},[s("div",{staticClass:"status"},[t._v(t._s(t._f("capitalize")(t.$t(t.currentTask.status))))]),t._v(" "),s("div",{staticClass:"title"},[t._v(t._s(t.$t("Nº da OS"))+" "+t._s(t.numOS))])])]),t._v(" "),s("div",{staticClass:"row"},[t._m(0),t._v(" "),s("div",{staticClass:"address"},[t._v("\n      "+t._s(t.currentTask.endereco)+"\n    ")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"location-icon"},[e("i",{staticClass:"material-icons"},[this._v("location_on")])])}]},h=s("VU/8")(f,v,!1,null,null,null);e.a=h.exports},ufbN:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),r=s("Xxa5"),i=s.n(r),o=s("exGp"),u=s.n(o),c=s("NYxO"),l=s("4YyR"),d=s("tJgT"),m=s("MF2h"),f={name:"TaskProblem",components:{TaskTitle:d.a,MessageButton:m.a},data:function(){return{taskComment:""}},methods:{saveProblem:function(){if(""==this.taskComment)this.$bus.$emit("showMessageEmitted",{msg:this.$t("Por favor, preencha a justificativa!")});else{this.$store.dispatch("task/failTask",{coment:this.taskComment});var t={message:this.$t("Justificativa salva com sucesso!"),duration:4e3};void 0!==this.tasks.all&&this.tasks.all.length&&(this.tasks.pendente.length||(t={message:this.$t("As OSs disponíveis para atendimento foram finalizadas!"),route:"task.future",button:this.$t("Ver OS futuras"),duration:1e4},this.$geolocation.stopBackground(this)),this.$bus.$emit("showSnackBar",t),this.$router.push("/tasks"))}},onInput:function(t){this.taskComment=t.target.value},setCurrentTask:function(){var t=this;return u()(i.a.mark(function e(){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.b)(parseInt(t.$route.params.id));case 2:return s=e.sent,e.next=5,t.$store.dispatch("task/setCurrentTask",{task:s});case 5:"travelDone"==t.task.status&&(t.taskComment="Consumidor Ausente e/ou Endereço não localizado"),t.$forceUpdate();case 7:case"end":return e.stop()}},e,t)}))()}},computed:n()({},Object(c.b)({task:"task/currentTask",tasks:"task/tasks"}),{numOS:function(){var t=this.task.id;if(this.task.metaDados)for(var e in this.task.metaDados)if("__OS"==this.task.metaDados[e].meta_key)return this.task.metaDados[e].meta_value;return t}}),created:function(){var t=this;return u()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$emit("changeParams",{pageTitle:t.$t("Recusar OS"),mapMenu:!1,backMenu:!0}),t.$forceUpdate(),t.taskComment="Consumidor Ausente e/ou Endereço não localizado";case 3:case"end":return e.stop()}},e,t)}))()},beforeMount:function(){var t=this;return u()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setCurrentTask();case 2:case"end":return e.stop()}},e,t)}))()},beforeDestroy:function(){this.$store.dispatch("task/setCurrentTask",{task:null})}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return null!=t.task?s("div",{staticClass:"taskproblem"},[s("form",{staticClass:"form-taskproblem",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.saveProblem(e)}}},[s("TaskTitle",{attrs:{task:t.task}}),t._v(" "),s("h5",{directives:[{name:"show",rawName:"v-show",value:"travelDone"!=t.task.status,expression:"task.status != 'travelDone'"}]},[t._v(t._s(t.$t("Justifique porque não será"))),s("br"),t._v(t._s(t.$t("possível atender essa OS")))]),t._v(" "),s("div",{staticClass:"containerform"},[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-textfield mdl-js-textfield  mdl-textfield--floating-label"},[s("textarea",{staticClass:"mdl-textfield__input",attrs:{id:"sample5",name:"sample5",rows:"3",required:""},on:{input:t.onInput}}),t._v(" "),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"sample5"}},[t._v(t._s(t.$t("Justificativa")))])]),t._v(" "),t._m(0)])],1),t._v(" "),s("div",{staticClass:"actions"},[s("MessageButton")],1)]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-right"},[e("button",{staticClass:"mdl-button  mdl-button--fab ",attrs:{type:"submit"}},[e("i",{staticClass:"material-icons arrow-right"},[this._v("keyboard_arrow_right")])])])}]};var h=s("VU/8")(f,v,!1,function(t){s("sAYs")},"data-v-d8604d04",null);e.default=h.exports}});
//# sourceMappingURL=4.64aaafe15f95c8eccf9c.js.map