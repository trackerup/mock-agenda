{"version":3,"sources":["webpack:///src/pages/tasks/CompletedTasks.vue","webpack:///./src/pages/tasks/CompletedTasks.vue?e933","webpack:///./src/pages/tasks/CompletedTasks.vue","webpack:///./src/plugins/http/download.js"],"names":["CompletedTasks","name","components","HourSeparator","TaskItem","data","tasksMorning","tasksEvening","tasksNight","tasksDawn","synchronizationRoute","allowOrder","orderName","computed","extends_default","Object","vuex_esm","tasks","user","morning","time","period","this","$t","reorder","evening","night","dawn","watch","value","sortTasksByPeriod","created","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","date","wrap","_context","prev","next","Date","$store","dispatch","task","stop","beforeMount","ComponentTasksClass","vue_esm","extend","mounted","$emit","pageTitle","mapMenu","backMenu","methods","_this2","concluida","filter","sort","b","parseInt","urgente","forEach","tarefa","planedStartHour","JSON","parse","planedStart","hora","utils","push","routeBlocked","route","status","requestAproveRoute","all","download","id","ordernarUrgencia","$event","index","tarefaAcima","tarefaAbaixo","findIndex","obj","direction","$set","length","reorderTasks","_this3","_callee3","_self","i","promise","_context3","t0","entities_tarefa","abrupt","then","_ref","_callee2","tarefas","_context2","$bus","_x","apply","arguments","tasks_CompletedTasks","render","_vm","_h","$createElement","_c","staticClass","attrs","model","showreorder","on","_v","_l","item","key","order","_e","class","click","$router","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","deleteFile","arquivo","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","resolve","reject","window","requestFileSystem","webkitRequestFileSystem","fileSystem","root","getFile","fileEntry","isFile","remove","entry","error"],"mappings":"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","file":"js/10.793c9f16b8d5ca33c60d.js","sourcesContent":["<template>\r\n  <div class=\"tasks-page\">\r\n    <div class=\"content-page\">\r\n      <template v-if=\"tasksMorning.length > 0\">\r\n        <HourSeparator :model=\"morning\" @reorder=\"reorderTasks($event)\" :showreorder=\"routeBlocked()\"></HourSeparator>\r\n        <TaskItem v-for=\"item in tasksMorning\" :key=\"item.id\" :task=\"item\" @order=\"ordernarUrgencia($event)\"></TaskItem>\r\n      </template>\r\n\r\n      <template v-if=\"tasksEvening.length > 0\">\r\n        <HourSeparator :model=\"evening\" @reorder=\"reorderTasks($event)\" :showreorder=\"routeBlocked()\"></HourSeparator>\r\n        <TaskItem v-for=\"item in tasksEvening\" :key=\"item.id\" :task=\"item\" @order=\"ordernarUrgencia($event)\"></TaskItem>\r\n      </template>\r\n\r\n      <template v-if=\"tasksNight.length > 0\">\r\n        <HourSeparator :model=\"night\" @reorder=\"reorderTasks($event)\" :showreorder=\"routeBlocked()\"></HourSeparator>\r\n        <TaskItem v-for=\"item in tasksNight\" :key=\"item.id\" :task=\"item\" @order=\"ordernarUrgencia($event)\"></TaskItem>\r\n      </template>\r\n\r\n      <template v-if=\"tasksDawn.length > 0\">\r\n        <HourSeparator :model=\"dawn\" @reorder=\"reorderTasks($event)\" :showreorder=\"routeBlocked()\"></HourSeparator>\r\n        <TaskItem v-for=\"item in tasksDawn\" :key=\"item.id\" :task=\"item\" @order=\"ordernarUrgencia($event)\"></TaskItem>\r\n      </template>\r\n\r\n    </div>\r\n    <div class=\"actions\" :class=\"[this.orderName == '' ? '' : 'hidden']\">\r\n      <button @click=\"$router.push('/messages')\"\r\n              class=\"mdl-button mdl-button--fab orange\">\r\n        <i class=\"material-icons message\">message</i>\r\n      </button>\r\n      <!-- <button @click=\"requestAproveRoute()\"\r\n              class=\"mdl-button mdl-button--fab mdl-button--fab--text\" v-show=\"routeBlocked()\">\r\n        <span>OK</span>\r\n      </button> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport TaskItem from '@/components/shared/TaskItem.vue'\r\nimport HourSeparator from '@/components/shared/HourSeparator.vue'\r\nimport { mapGetters } from 'vuex'\r\nimport { existsInArray } from '../../utils'\r\nimport SynchronizationRoute from '../../plugins/routes/synchronizationRoute'\r\nimport { saveTarefas, getTarefasByDate } from '../../plugins/persistence/entities/tarefa'\r\nimport { deleteFile } from '@/plugins/http/download'\r\n\r\nexport default {\r\n  name: 'Tasks',\r\n  components: {\r\n    HourSeparator,\r\n    TaskItem\r\n  },\r\n  data () {\r\n    return {\r\n      tasksMorning: [],\r\n      tasksEvening: [],\r\n      tasksNight: [],\r\n      tasksDawn: [],\r\n      synchronizationRoute: null,\r\n      allowOrder: true,\r\n      orderName: ''\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      tasks: 'task/tasks',\r\n      user: 'user/user'\r\n    }),\r\n    morning () {\r\n      return {\r\n        name: 'morning',\r\n        time: '07:00',\r\n        period: this.$t('Manhã'),\r\n        reorder: false\r\n      }\r\n    },\r\n    evening () {\r\n      return {\r\n        name: 'evening',\r\n        time: '13:00',\r\n        period: this.$t('Tarde'),\r\n        reorder: false\r\n      }\r\n    },\r\n    night () {\r\n      return {\r\n        name: 'night',\r\n        time: '19:00',\r\n        period: this.$t('Noite'),\r\n        reorder: false\r\n      }\r\n    },\r\n    dawn () {\r\n      return {\r\n        name: 'dawn',\r\n        time: '01:00',\r\n        period: this.$t('Madrugada'),\r\n        reorder: false\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    tasks (value) {\r\n      this.sortTasksByPeriod()\r\n    }\r\n  },\r\n  async created () {\r\n    let date = new Date()\r\n    await this.$store.dispatch('task/updateViewDate', {date: date})\r\n    await this.$store.dispatch('task/getTasks', {})\r\n    await this.$store.dispatch('task/setCurrentTask', {task: null})\r\n  },\r\n  beforeMount () {\r\n    const ComponentTasksClass = Vue.extend(SynchronizationRoute)\r\n    this.synchronizationRoute = new ComponentTasksClass()\r\n  },\r\n  mounted () {\r\n    this.$emit('changeParams', {\r\n      pageTitle: this.$t('OS concluídas'),\r\n      mapMenu: true,\r\n      backMenu: false\r\n    })\r\n    this.sortTasksByPeriod()\r\n  },\r\n  methods: {\r\n    sortTasksByPeriod () {\r\n      this.tasksMorning = []\r\n      this.tasksEvening = []\r\n      this.tasksNight = []\r\n      this.tasksDawn = []\r\n      if (this.tasks.concluida) {\r\n        // only tasks with status different of concluida or malsucedida\r\n        const tasks = this.tasks.concluida.filter(task => {\r\n          return task\r\n        })\r\n\r\n        tasks.sort(function (a, b) {\r\n          if (parseInt(a.urgente) < parseInt(b.urgente)) { return -1 }\r\n          if (parseInt(a.urgente) > parseInt(b.urgente)) { return 1 }\r\n          return 0\r\n        })\r\n\r\n        tasks.forEach(tarefa => {\r\n          let planedStartParsed = JSON.parse(tarefa.planedStart)\r\n          let planedStartHour = planedStartParsed.hora\r\n\r\n          if ((planedStartHour >= 1) && (planedStartHour <= 6)) {\r\n            if (!existsInArray(this.tasksDawn, tarefa)) {\r\n              this.tasksDawn.push(tarefa)\r\n            }\r\n          } else if ((planedStartHour >= 7) && (planedStartHour <= 12)) {\r\n            if (!existsInArray(this.tasksMorning, tarefa)) {\r\n              this.tasksMorning.push(tarefa)\r\n            }\r\n          } else if ((planedStartHour >= 13) && (planedStartHour <= 18)) {\r\n            if (!existsInArray(this.tasksEvening, tarefa)) {\r\n              this.tasksEvening.push(tarefa)\r\n            }\r\n          } else if ((planedStartHour >= 19) && (planedStartHour <= 23)) {\r\n            if (!existsInArray(this.tasksNight, tarefa)) {\r\n              this.tasksNight.push(tarefa)\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    routeBlocked () {\r\n      if (this.user && this.user.route && this.user.route.status == '1') {\r\n        return true\r\n      }\r\n      return false\r\n    },\r\n    requestAproveRoute () {\r\n      this.synchronizationRoute.requestAproveRoute(this)\r\n      this.tasks.all.forEach(task => {\r\n        deleteFile('task_' + task.id)\r\n      })\r\n    },\r\n    ordernarUrgencia ($event) {\r\n      var index\r\n      var tarefaAcima\r\n      var tarefaAbaixo\r\n      var tarefa\r\n      switch (this.orderName) {\r\n        case 'morning':\r\n          index = this.tasksMorning.findIndex(obj => {\r\n            return obj.id == $event.id\r\n          })\r\n          tarefa = this.tasksMorning[index]\r\n          if ($event.direction == 'up') {\r\n            if (index > 0) {\r\n              tarefaAcima = this.tasksMorning[index - 1]\r\n              this.$set(this.tasksMorning, index, tarefaAcima)\r\n              this.$set(this.tasksMorning, index - 1, tarefa)\r\n            }\r\n          }\r\n          if ($event.direction == 'down') {\r\n            if (index < (this.tasksMorning.length - 1)) {\r\n              tarefaAbaixo = this.tasksMorning[index + 1]\r\n              this.$set(this.tasksMorning, index, tarefaAbaixo)\r\n              this.$set(this.tasksMorning, index + 1, tarefa)\r\n            }\r\n          }\r\n          break\r\n        case 'evening':\r\n          index = this.tasksEvening.findIndex(obj => {\r\n            return obj.id == $event.id\r\n          })\r\n          tarefa = this.tasksEvening[index]\r\n          if ($event.direction == 'up') {\r\n            if (index > 0) {\r\n              tarefaAcima = this.tasksEvening[index - 1]\r\n              this.$set(this.tasksEvening, index, tarefaAcima)\r\n              this.$set(this.tasksEvening, index - 1, tarefa)\r\n            }\r\n          }\r\n          if ($event.direction == 'down') {\r\n            if (index < (this.tasksEvening.length - 1)) {\r\n              tarefaAbaixo = this.tasksEvening[index + 1]\r\n              this.$set(this.tasksEvening, index, tarefaAbaixo)\r\n              this.$set(this.tasksEvening, index + 1, tarefa)\r\n            }\r\n          }\r\n          break\r\n        case 'night':\r\n          index = this.tasksNight.findIndex(obj => {\r\n            return obj.id == $event.id\r\n          })\r\n          tarefa = this.tasksNight[index]\r\n          if ($event.direction == 'up') {\r\n            if (index > 0) {\r\n              tarefaAcima = this.tasksNight[index - 1]\r\n              this.$set(this.tasksNight, index, tarefaAcima)\r\n              this.$set(this.tasksNight, index - 1, tarefa)\r\n            }\r\n          }\r\n          if ($event.direction == 'down') {\r\n            if (index < (this.tasksNight.length - 1)) {\r\n              tarefaAbaixo = this.tasksNight[index + 1]\r\n              this.$set(this.tasksNight, index, tarefaAbaixo)\r\n              this.$set(this.tasksNight, index + 1, tarefa)\r\n            }\r\n          }\r\n          break\r\n        case 'dawn':\r\n          index = this.tasksDawn.findIndex(obj => {\r\n            return obj.id == $event.id\r\n          })\r\n          tarefa = this.tasksDawn[index]\r\n          if ($event.direction == 'up') {\r\n            if (index > 0) {\r\n              tarefaAcima = this.tasksDawn[index - 1]\r\n              this.$set(this.tasksDawn, index, tarefaAcima)\r\n              this.$set(this.tasksDawn, index - 1, tarefa)\r\n            }\r\n          }\r\n          if ($event.direction == 'down') {\r\n            if (index < (this.tasksDawn.length - 1)) {\r\n              tarefaAbaixo = this.tasksDawn[index + 1]\r\n              this.$set(this.tasksDawn, index, tarefaAbaixo)\r\n              this.$set(this.tasksDawn, index + 1, tarefa)\r\n            }\r\n          }\r\n          break\r\n      }\r\n    },\r\n    async reorderTasks ($event) {\r\n      let _self = this\r\n      if (this.orderName == '') {\r\n        this.orderName = $event\r\n      } else {\r\n        let i = 1\r\n        let promise = null\r\n        switch (this.orderName) {\r\n          case 'morning':\r\n            this.tasksMorning.forEach(task => {\r\n              task.urgente = i\r\n              i++\r\n            })\r\n            promise = saveTarefas(this.tasksMorning)\r\n            break\r\n          case 'evening':\r\n            this.tasksEvening.forEach(task => {\r\n              task.urgente = i\r\n              i++\r\n            })\r\n            promise = saveTarefas(this.tasksEvening)\r\n            break\r\n          case 'night':\r\n            this.tasksNight.forEach(task => {\r\n              task.urgente = i\r\n              i++\r\n            })\r\n            promise = saveTarefas(this.tasksNight)\r\n            break\r\n          case 'dawn':\r\n            this.tasksDawn.forEach(task => {\r\n              task.urgente = i\r\n              i++\r\n            })\r\n            promise = saveTarefas(this.tasksDawn)\r\n            break\r\n        }\r\n        promise.then(function () {\r\n          getTarefasByDate().then(\r\n            async function (tarefas) {\r\n              await _self.$store.dispatch('task/saveTasks', {tasks: tarefas})\r\n              _self.$bus.$emit('tasks-sync', true)\r\n            }\r\n          )\r\n        })\r\n        this.orderName = ''\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n  .actions {\r\n    position: fixed;\r\n    right: 8px;\r\n    bottom: 24px;\r\n    z-index: 99999;\r\n     transition: 0.3s all;\r\n    .mdl-button--fab {\r\n      display: block;\r\n      & ~ .mdl-button--fab {\r\n        margin-top: 12px;\r\n      }\r\n    }\r\n  }\r\n\r\n  /*.tasks-page{\r\n    height: calc( 100vh - 56px );\r\n    position: relative;\r\n  }*/\r\n  .tasks-page {\r\n    position: unset;\r\n    height: unset;\r\n  }\r\n</style>\r\n\r\n<style scoped>\r\n\r\n  .tasks-page:before {\r\n    content: '';\r\n    position: fixed;\r\n    bottom: 0px;\r\n    right: 0px;\r\n    width: 260px;\r\n    height: 140px;\r\n    /* background: url('../../assets/shared/bottom-left.svg'); */\r\n    background-size: 260px 140px;\r\n    background-repeat: no-repeat;\r\n    background-position: bottom right;\r\n    -moz-transform: scaleX(-1);\r\n    -webkit-transform: scaleX(-1);\r\n    -o-transform: scaleX(-1);\r\n    transform: scaleX(-1);\r\n    -ms-filter: fliph; /*IE*/\r\n    filter: fliph; /*IE*/\r\n    opacity: 0.3;\r\n    filter: alpha(opacity=30); /* For IE8 and earlier */\r\n  }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/tasks/CompletedTasks.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tasks-page\"},[_c('div',{staticClass:\"content-page\"},[(_vm.tasksMorning.length > 0)?[_c('HourSeparator',{attrs:{\"model\":_vm.morning,\"showreorder\":_vm.routeBlocked()},on:{\"reorder\":function($event){return _vm.reorderTasks($event)}}}),_vm._v(\" \"),_vm._l((_vm.tasksMorning),function(item){return _c('TaskItem',{key:item.id,attrs:{\"task\":item},on:{\"order\":function($event){return _vm.ordernarUrgencia($event)}}})})]:_vm._e(),_vm._v(\" \"),(_vm.tasksEvening.length > 0)?[_c('HourSeparator',{attrs:{\"model\":_vm.evening,\"showreorder\":_vm.routeBlocked()},on:{\"reorder\":function($event){return _vm.reorderTasks($event)}}}),_vm._v(\" \"),_vm._l((_vm.tasksEvening),function(item){return _c('TaskItem',{key:item.id,attrs:{\"task\":item},on:{\"order\":function($event){return _vm.ordernarUrgencia($event)}}})})]:_vm._e(),_vm._v(\" \"),(_vm.tasksNight.length > 0)?[_c('HourSeparator',{attrs:{\"model\":_vm.night,\"showreorder\":_vm.routeBlocked()},on:{\"reorder\":function($event){return _vm.reorderTasks($event)}}}),_vm._v(\" \"),_vm._l((_vm.tasksNight),function(item){return _c('TaskItem',{key:item.id,attrs:{\"task\":item},on:{\"order\":function($event){return _vm.ordernarUrgencia($event)}}})})]:_vm._e(),_vm._v(\" \"),(_vm.tasksDawn.length > 0)?[_c('HourSeparator',{attrs:{\"model\":_vm.dawn,\"showreorder\":_vm.routeBlocked()},on:{\"reorder\":function($event){return _vm.reorderTasks($event)}}}),_vm._v(\" \"),_vm._l((_vm.tasksDawn),function(item){return _c('TaskItem',{key:item.id,attrs:{\"task\":item},on:{\"order\":function($event){return _vm.ordernarUrgencia($event)}}})})]:_vm._e()],2),_vm._v(\" \"),_c('div',{staticClass:\"actions\",class:[this.orderName == '' ? '' : 'hidden']},[_c('button',{staticClass:\"mdl-button mdl-button--fab orange\",on:{\"click\":function($event){return _vm.$router.push('/messages')}}},[_c('i',{staticClass:\"material-icons message\"},[_vm._v(\"message\")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6c87f6ef\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/tasks/CompletedTasks.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6c87f6ef\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CompletedTasks.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6c87f6ef\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./CompletedTasks.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CompletedTasks.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CompletedTasks.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6c87f6ef\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CompletedTasks.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6c87f6ef\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tasks/CompletedTasks.vue\n// module id = null\n// module chunks = ","export function download (url, name) {\r\n  return new Promise((resolve, reject) => {\r\n    if (typeof window.rootFS != 'undefined' && window.rootFS != false && name) {\r\n      window.rootFS.getFile(\r\n        name, {\r\n          create: true,\r\n          exclusive: false\r\n        },\r\n        (fileEntry) => {\r\n          fileEntry.getMetadata(function (metadata) {\r\n            if (metadata.size == 0 ||\r\n              ((new Date().getTime() - metadata.modificationTime.getTime()) / 1000 / 60 / 60 / 24) >= 1) {\r\n              getFileFromUrl(url).then(result => {\r\n                fileEntry.createWriter(writer => {\r\n                  writer.onwrite = function (evt) {\r\n                    resolve(result)\r\n                  }\r\n                  writer.write(result)\r\n                })\r\n              }).catch(error => {\r\n                reject(error)\r\n              })\r\n            } else {\r\n              resolve(fileEntry)\r\n            }\r\n          },\r\n          function (error) {\r\n            reject(error)\r\n          })\r\n        },\r\n        function (error) {\r\n          reject(error)\r\n        }\r\n      )\r\n    } else {\r\n      // Just get content as a text\r\n      getFileFromUrl(url).then(result => {\r\n        resolve(result)\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nfunction getFileFromUrl (url) {\r\n  return new Promise((resolve, reject) => {\r\n    var oReq = new XMLHttpRequest()\r\n    // Make sure you add the domain name to the Content-Security-Policy <meta> element.\r\n    oReq.open('GET', url, true)\r\n    // Define how you want the XHR data to come back\r\n    oReq.responseType = 'blob'\r\n    oReq.onload = function (oEvent) {\r\n      var blob = oReq.response // Note: not oReq.responseText\r\n      if (blob) {\r\n        // Or read the data with a FileReader\r\n        var reader = new FileReader()\r\n        reader.addEventListener('loadend', function () {\r\n          resolve(reader.result)\r\n        }, error => {\r\n          reject(error)\r\n        })\r\n        reader.readAsText(blob)\r\n      } else reject(blob)\r\n    }\r\n    oReq.send(null)\r\n  })\r\n}\r\n\r\nexport function loadFile (arquivo) {\r\n  return new Promise((resolve, reject) => {\r\n    window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem\r\n    window.requestFileSystem(1, 0, function onFileSystemSuccess (fileSystem) {\r\n      fileSystem.root.getFile(arquivo, null, function gotFileEntry (fileEntry) {\r\n        fileEntry.file(function (file) {\r\n          var reader = new FileReader()\r\n          reader.onloadend = function (evt) {\r\n            try {\r\n              let jsonDownload = JSON.parse(evt.target.result)\r\n              resolve(jsonDownload)\r\n            } catch (e) {\r\n              deleteFile(arquivo).then(result => {\r\n                reject(e)\r\n              })\r\n            }\r\n          }\r\n          reader.readAsText(file)\r\n        },\r\n        function (error) {\r\n          reject(error)\r\n        })\r\n      },\r\n      function (error) {\r\n        reject(error)\r\n      })\r\n    },\r\n    function (error) {\r\n      reject(error)\r\n    })\r\n  })\r\n}\r\nexport function deleteFile (arquivo) {\r\n  return new Promise((resolve, reject) => {\r\n    window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem\r\n    window.requestFileSystem(\r\n      1,\r\n      0,\r\n      function onFileSystemSuccess (fileSystem) {\r\n        fileSystem.root.getFile(\r\n          arquivo,\r\n          null,\r\n          function gotFileEntry (fileEntry) {\r\n            if (fileEntry.isFile) {\r\n              fileEntry.remove(\r\n                function (entry) {\r\n                  resolve(entry)\r\n                },\r\n                function (error) {\r\n                  reject(error)\r\n                })\r\n            }\r\n          },\r\n          function (error) {\r\n            reject(error)\r\n          })\r\n      },\r\n      function (error) {\r\n        reject(error)\r\n      })\r\n  })\r\n}\r\n\r\nexport function getFile (arquivo, callback) {\r\n  window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem\r\n  window.requestFileSystem(\r\n    1,\r\n    0,\r\n    function onFileSystemSuccess (fileSystem) {\r\n      fileSystem.root.getFile(\r\n        arquivo,\r\n        null,\r\n        function gotFileEntry (fileEntry) {\r\n          fileEntry.file(\r\n            function (file) {\r\n              var reader = new FileReader()\r\n              reader.onloadend = function (evt) {\r\n                console.log('Read as JSON ' + arquivo)\r\n                if (typeof callback == 'function') {\r\n                  callback(evt.target.result)\r\n                } else {\r\n                  window.jsonDownload = JSON.parse(evt.target.result)\r\n                }\r\n              }\r\n              reader.readAsText(file)\r\n            },\r\n            function (error) {\r\n              console.log(error)\r\n            }\r\n          )\r\n        },\r\n        function (error) {\r\n          console.log(error)\r\n        }\r\n      )\r\n    },\r\n    function (error) {\r\n      console.log(error)\r\n    }\r\n  )\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/http/download.js"],"sourceRoot":""}