webpackJsonp([5],{"6ReR":function(t,e,a){"use strict";e.a=function(){return new n.a(function(t,e){Object(o.b)().then(function(a){i.a.exportToJsonString(a,function(a,s){a?e(a):t(s)})}).catch(function(t){e(t)})})},e.b=function(t){return new n.a(function(e,a){Object(o.b)().then(function(s){i.a.clearDatabase(s,function(n){n?a(n):i.a.importFromJsonString(s,t,function(t){t?a(t):e("Imported data successfully")})})}).catch(function(t){a(t)})})};var s=a("//Fk"),n=a.n(s),o=a("24aH"),r=a("IDf+"),i=a.n(r)},"90k9":function(t,e){},CBtn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),n=a.n(s),o=a("Xxa5"),r=a.n(o),i=a("exGp"),c=a.n(i),l=a("Ji5z"),u=a("3/rv"),d=a("4YyR"),v=a("4zFs"),m=a("162o"),f=a("6ReR"),h=a("gF58"),p={name:"Settings",data:function(){return{lang:"",deleteBloqued:5,typeCamNow:"",typeCamTitle:"",typeCamContent:""}},mounted:function(){var t=this;return c()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.getters["lang/locale"];case 2:t.lang=e.sent,t.$emit("changeParams",{pageTitle:t.$t("Configurações"),mapMenu:!1,backMenu:!1}),t.$dialogPolyfill.doDialog("dialogFormDelete");case 5:case"end":return e.stop()}},e,t)}))()},created:function(){this.verifyCam()},methods:{verifyCam:function(){"enabled"==(window.localStorage.getItem("camHTMLService")||"disabled")?(this.typeCamNow="câmera alternativa",this.typeCamTitle="Câmera nativa",this.typeCamContent="Clique para alterar para câmera nativa"):(this.typeCamNow="câmera nativa",this.typeCamTitle="Câmera alternativa",this.typeCamContent="Clique para alterar para câmera alternativa")},switchCam:function(){var t=window.localStorage.getItem("camHTMLService");t="enabled"==t?"disabled":"enabled",window.localStorage.setItem("camHTMLService",t),this.verifyCam();var e=this.typeCamNow,a={message:this.$t("Alterado para "+e),duration:2e3};this.$bus.$emit("showSnackBar",a)},logout:function(){var t=this;return c()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.dispatch("notification/saveNotificationId",{notificationId:"false"}),window.localStorage.setItem("notificationId","false"),t.$bus.$emit("tasks-sync",!1),t.$bus.$emit("auth-user",!1),t.$bus.$emit("messages-sync",!1),t.$root.registerNotId("false").catch(function(t){return console.error(t)}),t.$geolocation.stopBackground(t),window.cordova.plugins.backgroundMode.disable(),e.next=10,Object(v.c)(t.user).then(function(t){t.data;console.log("stop rastreamento")}).catch(function(e){var a=e.data;t.error=t.$t(a.error);var s={message:t.$t(t.error)};t.$bus.$emit("showSnackBar",s)});case 10:return e.next=12,Object(u.b)();case 12:return e.next=14,t.$store.dispatch("user/logout");case 14:t.$router.push("/login");case 15:case"end":return e.stop()}},e,t)}))()},sincAll:function(){var t=this;return c()(r.a.mark(function e(){var a,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.inSync=!1,a=t,t.$bus.$on("tasks-sync-finish",function(){a.$bus.$off("tasks-sync-finish");var t={message:a.$t("Sincronização finalizada"),duration:4e3};a.$bus.$emit("showSnackBar",t)}),s={message:a.$t("Sincronizando todos os dados"),duration:5e3},t.$bus.$emit("showSnackBar",s),Object(d.i)().then(function(e){t.$bus.$emit("auth-user",!0),t.$bus.$emit("tasks-sync",!0)});case 6:case"end":return e.stop()}},e,t)}))()},changeLocale:function(t){var e=this;return c()(r.a.mark(function a(){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=t.target.value,Object(l.b)(s),a.next=4,e.$store.dispatch("lang/setLocale",{locale:s});case 4:case"end":return a.stop()}},a,e)}))()},deleteAllData:function(){this.deleteBloqued=5,this.$el.querySelector("#dialogFormDelete").showModal(),Object(m.setTimeout)(this.countDownDeleteBloqued,1e3)},countDownDeleteBloqued:function(){this.deleteBloqued--,this.deleteBloqued>0&&Object(m.setTimeout)(this.countDownDeleteBloqued,1e3)},confirmDeleteAllData:function(){try{window.ClearData.cache(function(t){alert("Message: "+t)},function(t){alert("Error: "+t)})}catch(t){console.log(t)}this.$el.querySelector("#dialogFormDelete").close()},closeDeleteAllData:function(){this.$el.querySelector("#dialogFormDelete").close()},sendData:function(){var t=this,e={message:this.$t("Enviado todos os dados"),duration:5e3};this.$bus.$emit("showSnackBar",e),Object(f.a)().then(function(e){Object(h.a)({jsonString:e,localStorage:n()(window.localStorage)}).then(function(e){var a={message:t.$t(e.mensagem),duration:5e3};t.$bus.$emit("showSnackBar",a)})}).catch(function(t){alert("Error: "+t)})}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"content-page"},[a("div",{staticClass:"mdl-card",on:{click:t.sendData}},[a("div",{staticClass:"row"},[t._m(0),t._v(" "),a("h4",{staticClass:"title"},[t._v(t._s(t.$t("Relatório de uso do app")))])]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t.$t("Clique para enviar um relatório do sistema para o suporte. Essa ação pode levar alguns minutos.")))])]),t._v(" "),a("div",{staticClass:"mdl-card",on:{click:t.sincAll}},[a("div",{staticClass:"row"},[t._m(1),t._v(" "),a("h4",{staticClass:"title"},[t._v(t._s(t.$t("Sincronizar tudo")))])]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t.$t("Clique para enviar todos os dados deste aparelho. Essa ação pode levar alguns minutos.")))])]),t._v(" "),a("div",{staticClass:"mdl-card",on:{click:t.switchCam}},[a("div",{staticClass:"row"},[t._m(2),t._v(" "),a("h4",{staticClass:"title"},[t._v("\r\n            "+t._s(t.typeCamTitle)+"\r\n          ")])]),t._v(" "),a("div",{staticClass:"text"},[t._v("\r\n          "+t._s(t.typeCamContent)+"\r\n        ")])]),t._v(" "),a("div",{staticClass:"mdl-card",on:{click:t.deleteAllData}},[a("div",{staticClass:"row"},[t._m(3),t._v(" "),a("h4",{staticClass:"title"},[t._v(t._s(t.$t("Limpar Dados")))])]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t.$t("Clique para limpar dados do aplicativo. Será necessário realizar login novamente.")))])]),t._v(" "),a("div",{staticClass:"mdl-card",on:{click:t.logout}},[a("div",{staticClass:"row"},[t._m(4),t._v(" "),a("h4",{staticClass:"title"},[t._v(t._s(t.$t("Sair do app")))])]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t.$t("Clique para sair do aplicativo. Será necessário realizar login novamente.")))])]),t._v(" "),a("div",{staticClass:"mdl-card"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.lang,expression:"lang"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.lang=e.target.multiple?a:a[0]},t.changeLocale]}},[a("option",{attrs:{value:"pt"}},[t._v(t._s(t.$t("Português")))]),t._v(" "),a("option",{attrs:{value:"en"}},[t._v(t._s(t.$t("Inglês")))]),t._v(" "),a("option",{attrs:{value:"es"}},[t._v(t._s(t.$t("Espanhol")))])])])]),t._v(" "),a("dialog",{staticClass:"mdl-dialog full full-fixed",attrs:{id:"dialogFormDelete"}},[a("div",{staticClass:"mdl-dialog__content"},[a("h5",[t._v(t._s(t.$t("Realmente deseja excluir todos os dados do aplicativo?")))]),t._v(" "),a("h5",{staticClass:"orange"},[t._v("\r\n        "+t._s(t.$t("Esta ação é irrevesível."))+"\r\n      ")]),t._v("\r\n      "+t._s(t.$t(" O aplicativo será fechado e todos os dados serão perdidos!"))+"\r\n      "),a("div",{staticClass:"mdl-dialog__actions"},[t.deleteBloqued>0?a("button",{staticClass:"mdl-button grey",attrs:{type:"button"}},[t._v(t._s(t.$t("Aguarde ")+t.deleteBloqued))]):t._e(),t._v(" "),0==t.deleteBloqued?a("button",{staticClass:"mdl-button orange",attrs:{type:"button"},on:{click:function(e){return t.confirmDeleteAllData()}}},[t._v(t._s(t.$t("Limpar Dados")))]):t._e(),t._v(" "),a("button",{staticClass:"mdl-button close grey",attrs:{type:"button"},on:{click:function(e){return t.closeDeleteAllData()}}},[t._v(t._s(t.$t("Cancelar")))])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("i",{staticClass:"material-icons black"},[this._v("save")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("i",{staticClass:"material-icons black"},[this._v("sync")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("i",{staticClass:"material-icons black"},[this._v("camera")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("i",{staticClass:"material-icons black"},[this._v("delete")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("i",{staticClass:"material-icons black"},[this._v("input")])])}]};var _=a("VU/8")(p,g,!1,function(t){a("90k9")},"data-v-0de63acb",null);e.default=_.exports},"IDf+":function(t,e,a){"use strict";void 0!==t&&t.exports&&(t.exports={exportToJsonString:function(t,e){const a={},s=new Set(t.objectStoreNames);if(0===s.size)e(null,JSON.stringify(a));else{const n=Array.from(s),o=t.transaction(n,"readonly");o.onerror=(t=>e(t,null)),n.forEach(t=>{const s=[];o.objectStore(t).openCursor().onsuccess=(o=>{const r=o.target.result;r?(s.push(r.value),r.continue()):(a[t]=s,n.length===Object.keys(a).length&&e(null,JSON.stringify(a)))})})}},importFromJsonString:function(t,e,a){const s=new Set(t.objectStoreNames);if(0===s.size)a(null);else{const n=Array.from(s),o=t.transaction(n,"readwrite");o.onerror=(t=>a(t));const r=JSON.parse(e);n.forEach(t=>{let e=0;const s=Array.from(r[t]);r[t]&&s.length>0?s.forEach(s=>{const n=o.objectStore(t).add(s);n.onsuccess=(()=>{++e===r[t].length&&(delete r[t],0===Object.keys(r).length&&a(null))}),n.onerror=(t=>{console.log(t)})}):(delete r[t],0===Object.keys(r).length&&a(null))})}},clearDatabase:function(t,e){const a=new Set(t.objectStoreNames),s=a.size;if(0===s)e(null);else{const n=Array.from(a),o=t.transaction(n,"readwrite");o.onerror=(t=>e(t));let r=0;n.forEach(function(t){o.objectStore(t).clear().onsuccess=(()=>{++r===s&&e(null)})})}}})},gF58:function(t,e,a){"use strict";e.b=function(t){var e=this;return new c.a((a=r()(n.a.mark(function a(s,o){var r,i,c;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.b.post("/?loginCompleto",t);case 3:r=e.sent,i=r.data,"ok"==r.data.status?s(i):o(i),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),c={data:{success:!1,error:e.t0.message}},o(c);case 12:case"end":return e.stop()}},a,e,[[0,8]])})),function(t,e){return a.apply(this,arguments)}));var a},e.a=function(t){var e=this;return new c.a((a=r()(n.a.mark(function a(s,o){var r,i,c,u;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={data:t,pullTracker:{act:"sendJsonString"}},e.next=4,l.b.post("/?sendJsonString",r);case 4:i=e.sent,c=i.data,"ok"==i.data.status?s(c):o(c),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),u={data:{success:!1,error:e.t0.message}},o(u);case 13:case"end":return e.stop()}},a,e,[[0,9]])})),function(t,e){return a.apply(this,arguments)}));var a};var s=a("Xxa5"),n=a.n(s),o=a("exGp"),r=a.n(o),i=a("//Fk"),c=a.n(i),l=a("7K8a")}});
//# sourceMappingURL=5.3817a0c490a631ed4d9e.js.map