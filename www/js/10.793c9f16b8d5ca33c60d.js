webpackJsonp([10],{"8ICe":function(t,s){},DKf6:function(t,s){},cEJr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("Xxa5"),r=e.n(n),a=e("exGp"),i=e.n(a),o=e("Dd8w"),u=e.n(o),c=e("7+uW"),h=e("DYhV"),k=e("3uXF"),d=e("NYxO"),g=e("0xDb"),f=e("Q+0R"),l=e("4YyR"),p=e("poJr"),v={name:"Tasks",components:{HourSeparator:k.a,TaskItem:h.a},data:function(){return{tasksMorning:[],tasksEvening:[],tasksNight:[],tasksDawn:[],synchronizationRoute:null,allowOrder:!0,orderName:""}},computed:u()({},Object(d.b)({tasks:"task/tasks",user:"user/user"}),{morning:function(){return{name:"morning",time:"07:00",period:this.$t("Manhã"),reorder:!1}},evening:function(){return{name:"evening",time:"13:00",period:this.$t("Tarde"),reorder:!1}},night:function(){return{name:"night",time:"19:00",period:this.$t("Noite"),reorder:!1}},dawn:function(){return{name:"dawn",time:"01:00",period:this.$t("Madrugada"),reorder:!1}}}),watch:{tasks:function(t){this.sortTasksByPeriod()}},created:function(){var t=this;return i()(r.a.mark(function s(){var e;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e=new Date,s.next=3,t.$store.dispatch("task/updateViewDate",{date:e});case 3:return s.next=5,t.$store.dispatch("task/getTasks",{});case 5:return s.next=7,t.$store.dispatch("task/setCurrentTask",{task:null});case 7:case"end":return s.stop()}},s,t)}))()},beforeMount:function(){var t=c.default.extend(f.a);this.synchronizationRoute=new t},mounted:function(){this.$emit("changeParams",{pageTitle:this.$t("OS concluídas"),mapMenu:!0,backMenu:!1}),this.sortTasksByPeriod()},methods:{sortTasksByPeriod:function(){var t=this;if(this.tasksMorning=[],this.tasksEvening=[],this.tasksNight=[],this.tasksDawn=[],this.tasks.concluida){var s=this.tasks.concluida.filter(function(t){return t});s.sort(function(t,s){return parseInt(t.urgente)<parseInt(s.urgente)?-1:parseInt(t.urgente)>parseInt(s.urgente)?1:0}),s.forEach(function(s){var e=JSON.parse(s.planedStart).hora;e>=1&&e<=6?Object(g.b)(t.tasksDawn,s)||t.tasksDawn.push(s):e>=7&&e<=12?Object(g.b)(t.tasksMorning,s)||t.tasksMorning.push(s):e>=13&&e<=18?Object(g.b)(t.tasksEvening,s)||t.tasksEvening.push(s):e>=19&&e<=23&&(Object(g.b)(t.tasksNight,s)||t.tasksNight.push(s))})}},routeBlocked:function(){return!(!this.user||!this.user.route||"1"!=this.user.route.status)},requestAproveRoute:function(){this.synchronizationRoute.requestAproveRoute(this),this.tasks.all.forEach(function(t){Object(p.a)("task_"+t.id)})},ordernarUrgencia:function(t){var s,e,n,r;switch(this.orderName){case"morning":s=this.tasksMorning.findIndex(function(s){return s.id==t.id}),r=this.tasksMorning[s],"up"==t.direction&&s>0&&(e=this.tasksMorning[s-1],this.$set(this.tasksMorning,s,e),this.$set(this.tasksMorning,s-1,r)),"down"==t.direction&&s<this.tasksMorning.length-1&&(n=this.tasksMorning[s+1],this.$set(this.tasksMorning,s,n),this.$set(this.tasksMorning,s+1,r));break;case"evening":s=this.tasksEvening.findIndex(function(s){return s.id==t.id}),r=this.tasksEvening[s],"up"==t.direction&&s>0&&(e=this.tasksEvening[s-1],this.$set(this.tasksEvening,s,e),this.$set(this.tasksEvening,s-1,r)),"down"==t.direction&&s<this.tasksEvening.length-1&&(n=this.tasksEvening[s+1],this.$set(this.tasksEvening,s,n),this.$set(this.tasksEvening,s+1,r));break;case"night":s=this.tasksNight.findIndex(function(s){return s.id==t.id}),r=this.tasksNight[s],"up"==t.direction&&s>0&&(e=this.tasksNight[s-1],this.$set(this.tasksNight,s,e),this.$set(this.tasksNight,s-1,r)),"down"==t.direction&&s<this.tasksNight.length-1&&(n=this.tasksNight[s+1],this.$set(this.tasksNight,s,n),this.$set(this.tasksNight,s+1,r));break;case"dawn":s=this.tasksDawn.findIndex(function(s){return s.id==t.id}),r=this.tasksDawn[s],"up"==t.direction&&s>0&&(e=this.tasksDawn[s-1],this.$set(this.tasksDawn,s,e),this.$set(this.tasksDawn,s-1,r)),"down"==t.direction&&s<this.tasksDawn.length-1&&(n=this.tasksDawn[s+1],this.$set(this.tasksDawn,s,n),this.$set(this.tasksDawn,s+1,r))}},reorderTasks:function(t){var s=this;return i()(r.a.mark(function e(){var n,a,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s,""!=s.orderName){e.next=5;break}s.orderName=t,e.next=24;break;case 5:a=1,o=null,e.t0=s.orderName,e.next="morning"===e.t0?10:"evening"===e.t0?13:"night"===e.t0?16:"dawn"===e.t0?19:22;break;case 10:return s.tasksMorning.forEach(function(t){t.urgente=a,a++}),o=Object(l.j)(s.tasksMorning),e.abrupt("break",22);case 13:return s.tasksEvening.forEach(function(t){t.urgente=a,a++}),o=Object(l.j)(s.tasksEvening),e.abrupt("break",22);case 16:return s.tasksNight.forEach(function(t){t.urgente=a,a++}),o=Object(l.j)(s.tasksNight),e.abrupt("break",22);case 19:return s.tasksDawn.forEach(function(t){t.urgente=a,a++}),o=Object(l.j)(s.tasksDawn),e.abrupt("break",22);case 22:o.then(function(){var t;Object(l.c)().then((t=i()(r.a.mark(function t(s){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.$store.dispatch("task/saveTasks",{tasks:s});case 2:n.$bus.$emit("tasks-sync",!0);case 3:case"end":return t.stop()}},t,this)})),function(s){return t.apply(this,arguments)}))}),s.orderName="";case 24:case"end":return e.stop()}},e,s)}))()}}},w={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tasks-page"},[e("div",{staticClass:"content-page"},[t.tasksMorning.length>0?[e("HourSeparator",{attrs:{model:t.morning,showreorder:t.routeBlocked()},on:{reorder:function(s){return t.reorderTasks(s)}}}),t._v(" "),t._l(t.tasksMorning,function(s){return e("TaskItem",{key:s.id,attrs:{task:s},on:{order:function(s){return t.ordernarUrgencia(s)}}})})]:t._e(),t._v(" "),t.tasksEvening.length>0?[e("HourSeparator",{attrs:{model:t.evening,showreorder:t.routeBlocked()},on:{reorder:function(s){return t.reorderTasks(s)}}}),t._v(" "),t._l(t.tasksEvening,function(s){return e("TaskItem",{key:s.id,attrs:{task:s},on:{order:function(s){return t.ordernarUrgencia(s)}}})})]:t._e(),t._v(" "),t.tasksNight.length>0?[e("HourSeparator",{attrs:{model:t.night,showreorder:t.routeBlocked()},on:{reorder:function(s){return t.reorderTasks(s)}}}),t._v(" "),t._l(t.tasksNight,function(s){return e("TaskItem",{key:s.id,attrs:{task:s},on:{order:function(s){return t.ordernarUrgencia(s)}}})})]:t._e(),t._v(" "),t.tasksDawn.length>0?[e("HourSeparator",{attrs:{model:t.dawn,showreorder:t.routeBlocked()},on:{reorder:function(s){return t.reorderTasks(s)}}}),t._v(" "),t._l(t.tasksDawn,function(s){return e("TaskItem",{key:s.id,attrs:{task:s},on:{order:function(s){return t.ordernarUrgencia(s)}}})})]:t._e()],2),t._v(" "),e("div",{staticClass:"actions",class:[""==this.orderName?"":"hidden"]},[e("button",{staticClass:"mdl-button mdl-button--fab orange",on:{click:function(s){return t.$router.push("/messages")}}},[e("i",{staticClass:"material-icons message"},[t._v("message")])])])])},staticRenderFns:[]};var m=e("VU/8")(v,w,!1,function(t){e("8ICe"),e("DKf6")},"data-v-6c87f6ef",null);s.default=m.exports},poJr:function(t,s,e){"use strict";s.a=a;var n=e("//Fk"),r=e.n(n);function a(t){return new r.a(function(s,e){window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(1,0,function(n){n.root.getFile(t,null,function(t){t.isFile&&t.remove(function(t){s(t)},function(t){e(t)})},function(t){e(t)})},function(t){e(t)})})}}});
//# sourceMappingURL=10.793c9f16b8d5ca33c60d.js.map